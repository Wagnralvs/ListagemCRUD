<div class="container">
  <nav class="navbar navbar-expand-lg bg-body-tertiary mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Sistema de Chamados</a>
      <div class="text-end " id="navbarSupportedContent">
          <button class="btn btn-outline-success" (click)="newCallModal()">+ Novo Chamado</button>
      </div>
    </div>
  </nav>

  <ng-container *ngIf="!loading" >
    <h6><i class="bi bi-search"></i> Filtros:</h6>
    <div class="filter-form d-flex justify-content-between align-items-center mb-3">
        <input class="form-control me-2" type="search" placeholder="ID" aria-label="Search"  >
        <input class="form-control me-2" type="search" placeholder="Título" aria-label="Search"  >
        <select class="form-select me-2" name="statusFilter">
          <option value="">Todos</option>
          <option value="Aberto">Aberto</option>
          <option value="Progresso">Progresso</option>
          <option value="Fechado">Fechado</option>
        </select>
        <input class="form-control me-2" type="date" placeholder="Data" aria-label="Search" >

    </div>

    <table class="table table-striped table-hover">
      <thead>
        <tr class="">
          <th scope="col">ID</th>
          <th scope="col">Título</th>
          <th scope="col">Descrição</th>
          <th scope="col">Status</th>
          <th scope="col">Data</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items">
          <th scope="row">{{ item.id }}</th>
          <td>{{ item.title }}</td>
          <td>{{ item.description }}</td>
          <td>{{ item.status }}</td>
          <td>{{ item.data }}</td>
          <td>
            <button (click)="editCallModal(item)" type="button" class="btn"><i class="bi bi-pencil"></i></button>
            <button (click)="deleteCallModal(item)" type="button" class="btn"><i class="bi bi-trash"></i></button>
          </td>
        </tr>
      </tbody>
    </table>

    <footer class="d-flex justify-content-center align-items-top">
      <div class="me-5">
        <span class="text-muted">Mostrando
          <strong>{{page}}-{{ items.length }}</strong> de <strong>{{ totalPages }}</strong> registros
        </span>
      </div>
      <nav aria-label="Page navigation example">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="page === 1">
          <button (click)="navigationPage(page - 1)" class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </button>
        </li>
         <li class="page-item" *ngFor="let page of pagesDinamic">
            <button (click)="navigationPage(page)" class="page-link" href="#">{{ page }}</button>
         </li>
        <li class="page-item" [class.disabled]="page === totalPages">
          <button (click)="navigationPage(page + 1)" class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </button>
        </li>
      </ul>
    </nav>
    </footer>
  </ng-container>

  <div class="loading d-flex align-items-center justify-content-center" *ngIf="loading">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>

<confirm-delete-modal [item]="itemDeleted" [openDeleteModal]="openDeleteModal"></confirm-delete-modal>
